{"version":3,"sources":["components/dune/text/shaders.ts","components/dune/text/Incoming.tsx","components/dune/text/Outgoing.tsx","components/dune/text/index.tsx","components/dune/text/utils.ts","components/dune/wind/shader.ts","components/dune/wind/index.tsx","components/generator/words/index.ts","components/dune/wind/utils.ts","components/dune/index.tsx","hooks/useWindowResize.ts","components/generator/words/adjectives.ts","components/generator/words/articles.ts","components/generator/words/conjunctions.ts","components/generator/words/nouns.ts","components/generator/words/prepositions.ts","components/generator/words/quotes.ts","components/generator/words/verbs.ts","components/generator/utils.ts","components/generator/structures.ts","components/generator/sentence.ts","components/generator/paragraph.ts","components/generator/index.tsx","components/image-data/writer.ts","components/image-data/utils.ts","components/image-data/index.tsx","components/interface/ParagraphCount.tsx","components/interface/OtherMemory.tsx","components/interface/index.tsx","components/app/index.tsx","serviceWorker.ts","index.tsx"],"names":["fragmentShader","outgoingShader","uniforms","uTime","value","vertexShader","Incoming","attributes","incomingDelay","maxVisibleTime","onComplete","clockRef","React","useRef","Clock","hasCompletedRef","useEffect","current","geometryRef","useUpdate","geometry","position","visibleTime","color","setAttribute","materialRef","material","start","shader","useMemo","uDelay","useFrame","getDelta","ref","attach","args","Outgoing","Text","useState","incoming","undefined","outgoing","state","setState","prevState","vertexCount","length","Float32Array","minX","xOffset","Math","abs","i","newVisibleTime","MathUtils","randFloat","max","BufferAttribute","createBufferAttributes","WordType","Wind","dimensions","isRendering","rotationDiffRef","pointsRef","points","Geometry","maxX","width","maxY","height","particleCount","getParticleCount","vertices","push","Vector3","randInt","newRotationDiff","t","rotation","y","Dune","timeoutIdRef","setDimensions","handleResize","window","clearTimeout","setTimeout","innerWidth","innerHeight","addEventListener","removeEventListener","useWindowResize","concurrent","orthographic","camera","far","resize","scroll","debounce","pixelRatio","devicePixelRatio","randomElement","array","structures","Sentence","randomStructure","this","build","structure","string","sentence","Array","from","map","wordType","type","NOUN","nouns","ARTICLE","articles","VERB","verbs","PREPOSITION","prepositions","CONJUNCTION","conjunctions","ADJECTIVE","adjectives","SEPARATOR","getRandomWord","join","replace","charAt","toUpperCase","slice","Paragraph","min","sentenceCount","sentences","toString","Generator","paragraphs","minSentences","maxSentences","onChange","children","initialRenderRef","prevParagraphsRef","paragraphBuilder","generate","useCallback","count","defaultOptions","font","sizeToFill","maxFontSizeToFill","lineHeight","allowNewLine","lineBreak","textAlign","verticalAlign","paddingX","paddingY","Writer","canvas","options","ctx","getContext","scale","textBaseline","fillStyle","save","text","restore","fontParts","EL_WIDTH","EL_HEIGHT","MAX_TEXT_WIDTH","MAX_TEXT_HEIGHT","fontSize","match","newLineIndexes","textPos","x","lines","textBlockHeight","setFont","split","wrap","newLines","trim","idx","words","testString","sliced","leftover","forEach","word","index","measureText","k","splice","checkLength","j","breakText","adjustFontSize","size","indexOf","handleMultipleNewline","isNaN","parseInt","wordsCount","newFontSize","multiNewLineDelimiter","fillText","drawText","render","getParticleGap","input","output","temp","clamp","clampNumberRange","ImageData","wrapperRef","canvasRef","writer","setWriter","clientWidth","clientHeight","write","getImageData","clearRect","CanvasWrapper","styled","div","Wrapper","Dropdown","ul","isOpen","Option","li","ParagraphCount","className","setIsOpen","onClick","prevIsOpen","num","key","OtherMemory","button","Interface","onChangeCount","onGenerate","disabled","App","setCount","quotes","setText","setPosition","setIsRendering","handleImageData","imageData","particleGap","pointCoords","data","handleComplete","StyledBackground","newText","InterfaceWrapper","main","Boolean","location","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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,EAAc,CACZf,MAAOiB,OAAOG,WACdlB,OAAQe,OAAOI,gBAEhB,MAOL,OAJAJ,OAAOK,iBAAiB,SAAUN,GAElCA,IAEO,WACLC,OAAOC,aAAaJ,EAAajE,SAEjCoE,OAAOM,oBAAoB,SAAUP,MAEtC,IAEIvB,EDlBY+B,GAEnB,OAAK/B,EAKH,kBAAC,IAAD,CACEgC,YAAY,EACZC,cAAc,EACdC,OAAQ,CAAE1E,SAAU,CAAC,EAAG,EAAG,GAAI2E,IAAK,KACpCC,OAAQ,CAAEC,QAAQ,EAAMC,SAAU,CAAED,OAAQ,GAAID,OAAQ,IACxDG,WAAYf,OAAOgB,kBAEnB,kBAAC,EAAD,CAAMhF,SAAUA,EAAUb,cAAe,EAAGE,WAAYA,IACxD,kBAAC,EAAD,CAAMmD,WAAYA,EAAYC,YAAaA,KAZtC,M,sBEpBI,GACb,WACA,UACA,QACA,YACA,UACA,SACA,QACA,WACA,WACA,SACA,QACA,QACA,OACA,aACA,OACA,OACA,QACA,QACA,UACA,UACA,aACA,SACA,WACA,YACA,YACA,OACA,SACA,OACA,YACA,SACA,cACA,QACA,UACA,WACA,UACA,UACA,WACA,QACA,SACA,MACA,WACA,OACA,QACA,kBACA,UACA,QACA,UACA,UACA,WACA,YACA,OACA,QACA,UACA,SACA,WACA,SACA,OACA,QACA,WACA,QACA,SACA,QACA,MACA,eACA,aACA,WACA,aACA,WACA,aACA,cACA,SACA,UACA,MACA,QACA,YACA,QACA,SACA,OACA,QACA,QACA,SACA,YACA,UACA,YACA,YACA,eACA,UACA,UACA,QACA,WACA,WACA,QACA,SACA,UACA,aACA,SACA,MACA,UACA,YACA,aACA,YACA,WACA,MACA,OACA,WACA,WACA,aACA,aACA,WACA,YACA,WACA,YACA,UACA,YACA,YACA,WACA,SACA,YACA,UACA,UACA,UACA,aACA,YACA,YACA,WACA,aACA,QACA,QACA,WACA,OACA,YACA,WACA,SACA,QACA,cACA,SACA,gBACA,SACA,YACA,SACA,SACA,OACA,WACA,gBACA,cACA,UACA,WACA,QACA,cACA,UACA,WACA,aACA,cACA,OACA,WACA,cACA,aACA,SACA,QACA,UACA,YACA,WACA,WACA,aACA,OACA,OACA,QACA,SCxKa,GAAC,OCAD,GACb,QACA,WACA,MACA,KACA,QACA,UACA,SACA,OACA,MACA,SACA,cACA,MACA,UACA,MACA,WACA,KACA,QACA,KACA,OACA,SACA,aACA,SACA,QACA,OACA,WACA,QACA,WACA,UACA,QACA,OC9Ba,GACb,UACA,YACA,aACA,SACA,WACA,SACA,UACA,gBACA,WACA,YACA,UACA,SACA,QACA,qBACA,SACA,gBACA,WACA,YACA,YACA,mBACA,kBACA,UACA,UACA,YACA,YACA,QACA,UACA,SACA,WACA,YACA,aACA,YACA,eACA,gBACA,gBACA,UACA,QACA,UACA,YACA,WACA,QACA,SACA,YACA,SACA,WACA,QACA,QACA,SACA,UACA,WACA,eACA,aACA,eACA,SACA,QACA,QACA,OACA,OACA,OACA,SACA,OACA,UACA,UACA,UACA,UACA,QACA,gBACA,cACA,aACA,SACA,WACA,aACA,eACA,YACA,SACA,UACA,UACA,SACA,OACA,WACA,UACA,WACA,OACA,iBACA,OACA,OACA,QACA,QACA,QACA,oBACA,SACA,UACA,SACA,QACA,SACA,SACA,OACA,cACA,OACA,QACA,cACA,aACA,YACA,aACA,QACA,QACA,SACA,oBACA,UACA,QACA,YACA,YACA,UACA,QACA,OACA,QACA,UACA,YACA,OACA,YACA,QACA,WACA,gBACA,qBACA,cACA,iBACA,QACA,WACA,YACA,cACA,YACA,UACA,YACA,SACA,oBACA,QACA,UACA,QACA,sBACA,mBACA,YACA,SACA,SACA,SACA,SACA,OACA,aACA,gBACA,eACA,eACA,QACA,QACA,QACA,WACA,SACA,QACA,SACA,QACA,UACA,SACA,SACA,YACA,UACA,UACA,SACA,iBACA,cACA,QACA,yBACA,SACA,WACA,WACA,WACA,SACA,WACA,WACA,OACA,SACA,YACA,YACA,cACA,UACA,UACA,aACA,wBACA,QACA,cACA,SACA,SACA,WACA,eACA,UACA,OACA,aACA,QACA,OACA,SACA,mBACA,SACA,WACA,aACA,QACA,SACA,aACA,WACA,QACA,aACA,aACA,WACA,UACA,UACA,WACA,SACA,SACA,aACA,UACA,WACA,cACA,aACA,aACA,kBACA,QACA,SACA,QACA,eACA,OACA,YACA,UACA,kBACA,OACA,cACA,YACA,YACA,YACA,SACA,OACA,YACA,eACA,UACA,aACA,UACA,UACA,aACA,SACA,YACA,QACA,QACA,SACA,cACA,UACA,UACA,aACA,QACA,YACA,WACA,MACA,OACA,gBACA,iBACA,QACA,OACA,WACA,wBACA,UACA,YACA,WACA,WACA,aACA,YACA,YACA,cACA,QACA,UACA,UACA,SACA,OACA,mBACA,UACA,WACA,UACA,SACA,SACA,UACA,UACA,QACA,qBACA,QACA,YACA,WACA,UACA,OACA,YACA,QACA,UACA,UACA,YACA,QACA,aACA,UACA,gBACA,WACA,OACA,QACA,SACA,SACA,WACA,QACA,6BACA,OACA,eACA,MACA,aACA,eACA,gBACA,YACA,QACA,WACA,aACA,OACA,OACA,WACA,SACA,OACA,QACA,QCrUa,GACb,QACA,QACA,SACA,QACA,UACA,QACA,QACA,SACA,KACA,KACA,SACA,SACA,QACA,UACA,SACA,UACA,SACA,KACA,OACA,SACA,SACA,MACA,OACA,KACA,SACA,OACA,OACA,OACA,KACA,MACA,KACA,MACA,UACA,OACA,OACA,UACA,aACA,KACA,SACA,QACA,aACA,SACA,QACA,KACA,OACA,OACA,SACA,WChDa,GACb,2CACA,kCACA,4CACA,4CACA,oDACA,oDACA,kDACA,mCACA,qDACA,4CACA,gEACA,wCACA,mCACA,gDACA,2DACA,uBACA,4BACA,wDACA,6CACA,qCACA,8CACA,6CACA,gCACA,oDACA,kDACA,yCACA,+CACA,oCACA,+CACA,kCACA,6CACA,yCACA,8BACA,sDClCa,GACb,UACA,WACA,WACA,OACA,UACA,WACA,UACA,UACA,UACA,kBACA,SACA,UACA,WACA,UACA,SACA,SACA,aACA,WACA,UACA,UACA,SACA,SACA,YACA,WACA,WACA,WACA,UACA,OACA,SACA,WACA,WACA,UACA,SACA,UACA,WACA,WACA,OACA,cACA,WACA,WACA,QACA,UACA,WACA,OACA,WACA,SACA,SACA,cACA,QACA,QACA,QACA,YACA,QACA,SACA,UACA,WACA,SACA,SACA,SACA,eACA,MACA,QACA,aACA,KACA,SACA,QACA,QACA,SACA,SACA,QACA,cACA,QACA,QACA,YACA,QACA,QACA,QACA,SACA,SACA,OACA,UACA,WACA,WACA,WACA,cACA,WACA,QACA,UACA,UACA,UACA,UACA,SACA,WACA,QACA,SACA,aACA,QACA,OACA,kBACA,QACA,OACA,OACA,QACA,QACA,QACA,SACA,QACA,MACA,SACA,QACA,UACA,UACA,SACA,UACA,UACA,UACA,aACA,QACA,QACA,YACA,YACA,UACA,SACA,SACA,UACA,cACA,OACA,QACA,UACA,YACA,YACA,YClIK,SAASwC,EAAcC,GAC5B,OAAOA,EAAMjD,YAAUsB,QAAQ,EAAG2B,EAAMzD,OAAS,K,SXMvCa,K,SAAAA,E,YAAAA,E,SAAAA,E,gBAAAA,E,gBAAAA,E,cAAAA,E,eAAAA,M,KYTL,IAAM6C,EAAa,CACxB,OACA,QACA,aACA,QACA,cACA,kBACA,WACA,gBACA,aACA,SACA,UACA,cACA,eACA,cACA,QACA,YACA,aACA,aACA,aACA,WACA,iBACA,WACA,QACA,YCpBmBC,E,WAGnB,aAAe,yBAFPrG,WAEM,EACZ,IAAMsG,EAAkBJ,EAAcE,GACtCG,KAAKvG,MAAQuG,KAAKC,MAAMF,G,kDAGZG,GACZ,IFPuBC,EEWjBC,EAJSC,MAAMC,KAAKJ,GAA0BK,KAAI,SAACC,GAAD,ObMrD,SAAuBC,GAC5B,OAAQA,GACN,KAAKzD,EAAS0D,KACZ,OAAOf,EAAcgB,GACvB,KAAK3D,EAAS4D,QACZ,OAAOjB,EAAckB,GACvB,KA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","file":"static/js/main.ff4954bb.chunk.js","sourcesContent":["const incomingVertexShader = `\nuniform float uTime;\nuniform float uDelay;\n\nattribute float visibleTime;\n\nvarying float vVisibleDiff;\n\nvoid main() {\n  vVisibleDiff = uTime - visibleTime - uDelay;\n\n  gl_PointSize = 4.0;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n`;\n\nconst outgoingVertexShader = `\nuniform float uTime;\n\nattribute float visibleTime;\n\nvarying float vVisibleDiff;\n\nvoid main () {\n  vVisibleDiff = visibleTime - uTime;\n\n  gl_PointSize = 4.0;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n`;\n\nconst fragmentShader = `\nvarying float vVisibleDiff;\n\nvoid main() {\n  if (vVisibleDiff < 0.0) {\n    discard;\n  }\n\n  vec2 cxy = 4.0 * gl_PointCoord - 2.0;\n\n  float r = dot(cxy, cxy);\n\n  if (r > 2.0) {\n    discard;\n  }\n\n  gl_FragColor = vec4(0.9, 0.3, 0.0, 1.0);\n}\n`;\n\nexport const incomingShader = (uDelay: number) => {\n  return {\n    uniforms: {\n      uTime: { value: 0.0 },\n      uDelay: { value: uDelay },\n    },\n    vertexShader: incomingVertexShader,\n    fragmentShader,\n  };\n};\n\nexport const outgoingShader = {\n  uniforms: {\n    uTime: { value: 0.0 },\n  },\n  vertexShader: outgoingVertexShader,\n  fragmentShader,\n};\n","import React from 'react';\nimport { Clock } from 'three';\nimport { useUpdate, useFrame } from 'react-three-fiber';\nimport { incomingShader } from './shaders';\nimport type { BufferAttributes } from './types';\n\ntype Props = {\n  attributes: BufferAttributes;\n  incomingDelay: number;\n  maxVisibleTime: number;\n  onComplete?: () => void;\n};\n\nexport const Incoming: React.FC<Props> = ({\n  attributes,\n  incomingDelay,\n  maxVisibleTime,\n  onComplete,\n}) => {\n  const clockRef = React.useRef(new Clock());\n\n  const hasCompletedRef = React.useRef(false);\n\n  React.useEffect(() => {\n    hasCompletedRef.current = false;\n  }, [attributes]);\n\n  const geometryRef = useUpdate<THREE.BufferGeometry>(\n    (geometry) => {\n      const [position, visibleTime, color] = attributes;\n\n      geometry.setAttribute('position', position);\n      geometry.setAttribute('visibleTime', visibleTime);\n      geometry.setAttribute('color', color);\n    },\n    [attributes]\n  );\n\n  const materialRef = useUpdate<THREE.ShaderMaterial>(\n    (material) => {\n      material.uniforms.uTime.value = 0.0;\n      clockRef.current.start();\n    },\n    [attributes]\n  );\n\n  const shader = React.useMemo(() => incomingShader(incomingDelay), [\n    incomingDelay,\n  ]);\n\n  useFrame(() => {\n    if (materialRef.current) {\n      materialRef.current.uniforms.uTime.value += clockRef.current.getDelta();\n\n      if (\n        materialRef.current.uniforms.uTime.value >\n          maxVisibleTime + incomingDelay &&\n        !hasCompletedRef.current\n      ) {\n        hasCompletedRef.current = true;\n        onComplete?.();\n      }\n    }\n  });\n\n  return (\n    <points>\n      <bufferGeometry ref={geometryRef} attach=\"geometry\" />\n      <shaderMaterial ref={materialRef} attach=\"material\" args={[shader]} />\n    </points>\n  );\n};\n","import React from 'react';\nimport { Clock } from 'three';\nimport { useUpdate, useFrame } from 'react-three-fiber';\nimport { outgoingShader } from './shaders';\nimport type { BufferAttributes } from './types';\n\ntype Props = {\n  attributes: BufferAttributes;\n};\n\nexport const Outgoing: React.FC<Props> = ({ attributes }) => {\n  const clockRef = React.useRef(new Clock());\n\n  const geometryRef = useUpdate<THREE.BufferGeometry>(\n    (geometry) => {\n      const [position, visibleTime, color] = attributes;\n\n      geometry.setAttribute('position', position);\n      geometry.setAttribute('visibleTime', visibleTime);\n      geometry.setAttribute('color', color);\n    },\n    [attributes]\n  );\n\n  const materialRef = useUpdate<THREE.ShaderMaterial>(\n    (material) => {\n      material.uniforms.uTime.value = 0.0;\n      clockRef.current.start();\n    },\n    [attributes]\n  );\n\n  useFrame(() => {\n    if (materialRef.current) {\n      materialRef.current.uniforms.uTime.value += clockRef.current.getDelta();\n    }\n  });\n\n  return (\n    <points>\n      <bufferGeometry ref={geometryRef} attach=\"geometry\" />\n      <shaderMaterial\n        ref={materialRef}\n        attach=\"material\"\n        args={[outgoingShader]}\n      />\n    </points>\n  );\n};\n","import React from 'react';\nimport { Incoming } from './Incoming';\nimport { Outgoing } from './Outgoing';\nimport { createBufferAttributes } from './utils';\nimport type { BufferAttributes } from './types';\n\ntype Props = {\n  position: Float32Array;\n  incomingDelay: number;\n  onComplete?: () => void;\n};\n\ntype State = {\n  incoming?: BufferAttributes;\n  outgoing?: BufferAttributes;\n  maxVisibleTime?: number;\n};\n\nexport const Text: React.FC<Props> = ({\n  position,\n  incomingDelay,\n  onComplete,\n}) => {\n  const [state, setState] = React.useState<State>({\n    incoming: undefined,\n    outgoing: undefined,\n    maxVisibleTime: undefined,\n  });\n\n  React.useEffect(() => {\n    setState((prevState) => {\n      const { attributes: incoming, maxVisibleTime } = createBufferAttributes(\n        position\n      );\n\n      return {\n        outgoing: prevState.incoming ? prevState.incoming : undefined,\n        incoming,\n        maxVisibleTime,\n      };\n    });\n  }, [position]);\n\n  return (\n    <>\n      {state.incoming && state.maxVisibleTime && (\n        <Incoming\n          attributes={state.incoming}\n          incomingDelay={incomingDelay}\n          maxVisibleTime={state.maxVisibleTime}\n          onComplete={onComplete}\n        />\n      )}\n      {state.outgoing && <Outgoing attributes={state.outgoing} />}\n    </>\n  );\n};\n","import { MathUtils, BufferAttribute } from 'three';\nimport type { BufferAttributes } from './types';\n\nexport function createBufferAttributes(\n  position: Float32Array\n): { attributes: BufferAttributes; maxVisibleTime: number } {\n  let maxVisibleTime = 0;\n\n  const vertexCount = position.length / 3;\n\n  const color = new Float32Array(vertexCount);\n  const visibleTime = new Float32Array(vertexCount);\n\n  const minX = position[0];\n\n  const xOffset = Math.abs(minX);\n\n  for (let i = 0; i < vertexCount; i++) {\n    const newVisibleTime =\n      (MathUtils.randFloat(-200.0, 200.0) + (position[i * 3] + xOffset)) / 500;\n    maxVisibleTime = Math.max(maxVisibleTime, newVisibleTime);\n    visibleTime[i] = newVisibleTime;\n  }\n\n  return {\n    attributes: [\n      new BufferAttribute(position, 3),\n      new BufferAttribute(visibleTime, 1),\n      new BufferAttribute(color, 1),\n    ],\n    maxVisibleTime,\n  };\n}\n","export const vertexShader = `\nuniform float uTime;\n\nvarying float vPositionZ;\n\nvoid main() {\n  vPositionZ = position.z;\n  \n  gl_PointSize = 6.0;\n\n  vec3 newPosition = vec3(position.x, position.y + sin(uTime), position.z);\n  \n  gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n}\n`;\n\nexport const fragmentShader = `\nvarying float vPositionZ;\n\nvoid main() {\n  vec2 cxy = 6.0 * gl_PointCoord - 3.0;\n\n  float r = dot(cxy, cxy);\n\n  if (r > 3.0) {\n    discard;\n  }\n\n  gl_FragColor = vec4(0.9, 0.3, 0.0, fract(sin(vPositionZ)));\n}\n`;\n\nexport const shader = {\n  uniforms: {\n    uTime: { value: 0.0 },\n  },\n  vertexShader,\n  fragmentShader,\n};\n","import React from 'react';\nimport { Clock, Geometry, MathUtils, Vector3 } from 'three';\nimport { useUpdate, useFrame } from 'react-three-fiber';\nimport { shader } from './shader';\nimport { getParticleCount, lerp } from './utils';\n\ntype Props = {\n  dimensions: {\n    width: number;\n    height: number;\n  };\n  isRendering: boolean;\n};\n\nexport const Wind: React.FC<Props> = ({ dimensions, isRendering }) => {\n  const clockRef = React.useRef(new Clock());\n\n  const rotationDiffRef = React.useRef(0.01);\n\n  const pointsRef = useUpdate<THREE.Points>((points) => {\n    const geometry = new Geometry();\n\n    const maxX = dimensions.width / 2;\n    const maxY = dimensions.height / 2;\n\n    const particleCount = getParticleCount(dimensions);\n\n    for (let i = 0; i < particleCount; i++) {\n      geometry.vertices.push(\n        new Vector3(\n          MathUtils.randInt(-maxX, maxX),\n          MathUtils.randInt(-maxY, maxY),\n          MathUtils.randInt(-maxX, maxX)\n        )\n      );\n    }\n\n    points.geometry = geometry;\n  }, []);\n\n  const materialRef = useUpdate<THREE.ShaderMaterial>((material) => {\n    material.uniforms.uTime.value = 0.0;\n    clockRef.current.start();\n  }, []);\n\n  useFrame(() => {\n    if (pointsRef.current) {\n      const newRotationDiff = lerp(\n        rotationDiffRef.current,\n        isRendering ? 0.1 : 0.01,\n        0.02\n      );\n\n      rotationDiffRef.current = newRotationDiff;\n\n      pointsRef.current.rotation.y -= newRotationDiff;\n    }\n\n    if (materialRef.current) {\n      materialRef.current.uniforms.uTime.value += clockRef.current.getDelta();\n    }\n  });\n\n  return (\n    <points ref={pointsRef}>\n      <shaderMaterial ref={materialRef} attach=\"material\" args={[shader]} />\n    </points>\n  );\n};\n","import adjectives from './adjectives';\nimport articles from './articles';\nimport conjunctions from './conjunctions';\nimport nouns from './nouns';\nimport prepositions from './prepositions';\nimport quotes from './quotes';\nimport verbs from './verbs';\nimport { randomElement } from '../utils';\n\nexport enum WordType {\n  NOUN = 'N',\n  ARTICLE = 'R',\n  VERB = 'V',\n  PREPOSITION = 'P',\n  CONJUNCTION = 'C',\n  ADJECTIVE = 'A',\n  SEPARATOR = ','\n}\n\nexport function getRandomWord(type: WordType): string {\n  switch (type) {\n    case WordType.NOUN:\n      return randomElement(nouns);\n    case WordType.ARTICLE:\n      return randomElement(articles);\n    case WordType.VERB:\n      return randomElement(verbs);\n    case WordType.PREPOSITION:\n      return randomElement(prepositions);\n    case WordType.CONJUNCTION:\n      return randomElement(conjunctions);\n    case WordType.ADJECTIVE:\n      return randomElement(adjectives);\n    case WordType.SEPARATOR:\n      return ', ';\n  }\n}\n\nexport function getRandomQuote(): string {\n  return randomElement(quotes);\n}\n","import type { Dimensions } from 'hooks/useWindowResize';\n\nexport function getParticleCount({ width, height }: Dimensions): number {\n  return (width * height) / 750;\n}\n\nexport function lerp(value1: number, value2: number, t: number) {\n  return value1 * (1 - t) + value2 * t;\n}\n","import React from 'react';\nimport { Canvas } from 'react-three-fiber';\nimport { useWindowResize } from 'hooks/useWindowResize';\nimport { Text } from './text';\nimport { Wind } from './wind';\n\ntype Props = {\n  position: Float32Array;\n  isRendering: boolean;\n  onComplete?: () => void;\n};\n\nexport const Dune: React.FC<Props> = ({\n  position,\n  isRendering,\n  onComplete,\n}) => {\n  const dimensions = useWindowResize();\n\n  if (!dimensions) {\n    return null;\n  }\n\n  return (\n    <Canvas\n      concurrent={true}\n      orthographic={true}\n      camera={{ position: [0, 0, 1], far: 500 }}\n      resize={{ scroll: true, debounce: { scroll: 50, resize: 0 } }}\n      pixelRatio={window.devicePixelRatio}\n    >\n      <Text position={position} incomingDelay={2} onComplete={onComplete} />\n      <Wind dimensions={dimensions} isRendering={isRendering} />\n    </Canvas>\n  );\n};\n","import React from 'react';\n\nexport type Dimensions = {\n  width: number;\n  height: number;\n};\n\nexport function useWindowResize() {\n  const timeoutIdRef = React.useRef<number>();\n\n  const [dimensions, setDimensions] = React.useState<Dimensions | undefined>();\n\n  React.useEffect(() => {\n    const handleResize = () => {\n      window.clearTimeout(timeoutIdRef.current);\n\n      timeoutIdRef.current = window.setTimeout(() => {\n        setDimensions({\n          width: window.innerWidth,\n          height: window.innerHeight,\n        });\n      }, 1_000);\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    handleResize();\n\n    return () => {\n      window.clearTimeout(timeoutIdRef.current);\n\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  return dimensions;\n}\n","export default [\n  'absolute',\n  'accepts',\n  'adept',\n  'admirable',\n  'adopted',\n  'always',\n  'angry',\n  'Arrakeen',\n  'arranges',\n  'behind',\n  'bindu',\n  'blind',\n  'blue',\n  'blustering',\n  'bold',\n  'born',\n  'borne',\n  'brave',\n  'brutish',\n  'careful',\n  'chivalrous',\n  'closed',\n  'combined',\n  'countless',\n  'dangerous',\n  'dark',\n  'deadly',\n  'deaf',\n  'deep-sand',\n  'deeper',\n  'drug-tipped',\n  'ducal',\n  'elegant',\n  'enduring',\n  'envious',\n  'extreme',\n  'faithful',\n  'false',\n  'faster',\n  'fat',\n  'feminine',\n  'fine',\n  'first',\n  'flower-spangled',\n  'flowing',\n  'fluid',\n  'foolish',\n  'forever',\n  'formless',\n  'fortunate',\n  'free',\n  'fully',\n  'genetic',\n  'gifted',\n  'graceful',\n  'greedy',\n  'hard',\n  'harsh',\n  'headlong',\n  'heavy',\n  'higher',\n  'ideal',\n  'ill',\n  'illuminating',\n  'incomplete',\n  'infamous',\n  'infectious',\n  'innocent',\n  'insightful',\n  'instinctual',\n  'inward',\n  'jealous',\n  'key',\n  'kiswa',\n  'legendary',\n  'light',\n  'little',\n  'lost',\n  'loyal',\n  'major',\n  'marked',\n  'masculine',\n  'medical',\n  'mercenary',\n  'messianic',\n  'metaphysical',\n  'million',\n  'mindful',\n  'minor',\n  'mnemonic',\n  'monetary',\n  'moral',\n  'mortal',\n  'movable',\n  'mysterious',\n  'mystic',\n  'new',\n  'newborn',\n  'nullified',\n  'occasional',\n  'off-world',\n  'official',\n  'old',\n  'only',\n  'ordinary',\n  'orthodox',\n  'particular',\n  'persistent',\n  'personal',\n  'pervasive',\n  'powerful',\n  'pre-spice',\n  'precise',\n  'prescient',\n  'primitive',\n  'profound',\n  'prompt',\n  'prophetic',\n  'prudent',\n  'pyretic',\n  'radical',\n  'red-haired',\n  'religious',\n  'remaining',\n  'residual',\n  'respectful',\n  'right',\n  'royal',\n  'ruthless',\n  'safe',\n  'Sardaukar',\n  'scorched',\n  'secret',\n  'short',\n  'significant',\n  'sparse',\n  'spring-loaded',\n  'stable',\n  'steadfast',\n  'stolen',\n  'strong',\n  'such',\n  'superior',\n  'superstitious',\n  'symmetrical',\n  'tarried',\n  'terrible',\n  'tonal',\n  'traditional',\n  'trained',\n  'tranquil',\n  'transitory',\n  'treacherous',\n  'true',\n  'uncommon',\n  'unconscious',\n  'unfinished',\n  'unique',\n  'upper',\n  'violent',\n  'voracious',\n  'wasteful',\n  'weirding',\n  'well-known',\n  'wild',\n  'wise',\n  'woven',\n  'young'\n];\n","export default ['the'];\n","export default [\n  'after',\n  'although',\n  'and',\n  'as',\n  'as if',\n  'because',\n  'before',\n  'both',\n  'but',\n  'either',\n  'even though',\n  'for',\n  'neither',\n  'nor',\n  'not only',\n  'or',\n  'since',\n  'so',\n  'that',\n  'though',\n  'thus spoke',\n  'unless',\n  'until',\n  'when',\n  'whenever',\n  'where',\n  'wherever',\n  'whether',\n  'while',\n  'yet'\n];\n","export default [\n  'ability',\n  'adversary',\n  'allegiance',\n  'ambush',\n  'ancestor',\n  'animal',\n  'Arrakis',\n  'assassination',\n  'Atreides',\n  'awakening',\n  'baliset',\n  'banner',\n  'Baron',\n  'base of the pillar',\n  'battle',\n  'Bene Gesserit',\n  'betrayal',\n  'blackmail',\n  'bloodline',\n  'breeding program',\n  'Butlerian Jihad',\n  'Caladan',\n  'capsule',\n  'carry-all',\n  'challenge',\n  'Chani',\n  'citadel',\n  'combat',\n  'commando',\n  'companion',\n  'complexity',\n  'concubine',\n  'conditioning',\n  'confrontation',\n  'consternation',\n  'control',\n  'corps',\n  'Corrino',\n  'courtesan',\n  'creosote',\n  'crest',\n  'crisis',\n  'crysknife',\n  'danger',\n  'daughter',\n  'death',\n  'deity',\n  'desert',\n  'destiny',\n  'devotion',\n  'dew gatherer',\n  'discontent',\n  'disobedience',\n  'doctor',\n  'doubt',\n  'dream',\n  'drug',\n  'duel',\n  'Duke',\n  'Duncan',\n  'Dune',\n  'dynasty',\n  'ecology',\n  'emotion',\n  'emperor',\n  'enemy',\n  'enlightenment',\n  'environment',\n  'Esmar Tuek',\n  'eunuch',\n  'evensong',\n  'experience',\n  'exploitation',\n  'falsehood',\n  'family',\n  'fanatic',\n  'Farrukh',\n  'father',\n  'fear',\n  'Fedaykin',\n  'Fenring',\n  'ferocity',\n  'Feyd',\n  'fighting force',\n  'fist',\n  'flaw',\n  'flesh',\n  'folly',\n  'force',\n  'forever his place',\n  'Fremen',\n  'fremkit',\n  'future',\n  'Gaius',\n  'galaxy',\n  'gallon',\n  'gene',\n  'Giedi Prime',\n  'gift',\n  'Ginaz',\n  'Golden Path',\n  'gom jabbar',\n  'greatness',\n  'greenhouse',\n  'guard',\n  'guilt',\n  'Gurney',\n  'Hall of Portraits',\n  'Halleck',\n  'Harah',\n  'Harkonnen',\n  'harvester',\n  'Hasimir',\n  'Hawat',\n  'heir',\n  'Helen',\n  'history',\n  'homeworld',\n  'hope',\n  'hostility',\n  'House',\n  'humanity',\n  'hunter-seeker',\n  'hyperconsciousness',\n  'Iakin Nefud',\n  'Ichwan Bedwine',\n  'Idaho',\n  'imperium',\n  'indignity',\n  'inheritance',\n  'inner eye',\n  'insight',\n  'intensity',\n  'Irulan',\n  'island of Selfdom',\n  'Jamis',\n  'Jessica',\n  'jihad',\n  'Judge of the Change',\n  'Kwisatz Haderach',\n  'Landsraad',\n  'lasgun',\n  'leader',\n  'legend',\n  'legion',\n  'Leto',\n  'Liet-Kynes',\n  'Lisan al-Gaib',\n  'Little Maker',\n  'little-death',\n  'logic',\n  'Mahdi',\n  'maker',\n  'maneuver',\n  'mantra',\n  'Mapes',\n  'master',\n  'maula',\n  'melange',\n  'memory',\n  'Mentat',\n  'mercenary',\n  'message',\n  'messiah',\n  'meteor',\n  'million deaths',\n  'mind-killer',\n  'miner',\n  'Missionaria Protectiva',\n  'Mohiam',\n  'moisture',\n  'monopoly',\n  'morality',\n  'mother',\n  'mountain',\n  \"Muad'Dib\",\n  'naib',\n  'native',\n  'navigator',\n  'necessity',\n  'negotiation',\n  'network',\n  'nothing',\n  'oppression',\n  'Orange Catholic Bible',\n  'order',\n  'ornithopter',\n  'Otheym',\n  'palace',\n  'paradise',\n  'Pardot Kynes',\n  'pattern',\n  'Paul',\n  'perception',\n  'Piter',\n  'plan',\n  'planet',\n  'planetary system',\n  'poison',\n  'politics',\n  'population',\n  'prana',\n  'prayer',\n  'prediction',\n  'princess',\n  'probe',\n  'production',\n  'propaganda',\n  'prophecy',\n  'proverb',\n  'purpose',\n  'question',\n  'Rabban',\n  'Rautha',\n  'reflection',\n  'refrain',\n  'religion',\n  'resemblance',\n  'resilience',\n  'revelation',\n  'Reverend Mother',\n  'ridge',\n  'ritual',\n  'rival',\n  'Royal Creche',\n  'rule',\n  'sacrifice',\n  'sadness',\n  'Salusa Secundus',\n  'sand',\n  'sandcrawler',\n  'sandstorm',\n  'Sardaukar',\n  'sayyadina',\n  'school',\n  'seal',\n  'seduction',\n  'self-control',\n  'service',\n  'Shaddam IV',\n  'Shadout',\n  'shadows',\n  'Shai-Hulud',\n  'shield',\n  'shigawire',\n  'shout',\n  'shrub',\n  'sietch',\n  'Sietch Tabr',\n  'silence',\n  'Siridar',\n  'sisterhood',\n  'slave',\n  'small box',\n  'smuggler',\n  'son',\n  'soul',\n  'Spacing Guild',\n  'spannungsbogen',\n  'spice',\n  'spit',\n  'splinter',\n  'St. Alia-of-the-Knife',\n  'Stilgar',\n  'stillsuit',\n  'strategy',\n  'subtlety',\n  'Suk School',\n  'suspensor',\n  'suspicion',\n  'swordmaster',\n  'Taqwa',\n  'teacher',\n  'tension',\n  'terror',\n  'test',\n  'testing facility',\n  'the Way',\n  'thinking',\n  'thopter',\n  'throne',\n  'Thufir',\n  'thumper',\n  'Tleilax',\n  'tooth',\n  'total obliteration',\n  'trade',\n  'tradition',\n  'training',\n  'traitor',\n  'trap',\n  'treachery',\n  'tribe',\n  'tribute',\n  'triumph',\n  'troubador',\n  'trust',\n  'truthsayer',\n  'turmoil',\n  'understanding',\n  'universe',\n  'Usul',\n  'value',\n  'victim',\n  'vision',\n  'Vladimir',\n  'Voice',\n  'Voice from the Outer World',\n  'wall',\n  'Wanna Marcus',\n  'war',\n  'water bond',\n  'water burden',\n  'Water of Life',\n  'water-fat',\n  'water',\n  'weakness',\n  'Wellington',\n  'wife',\n  'wind',\n  'windtrap',\n  'wisdom',\n  'worm',\n  'wound',\n  'Yueh'\n];\n","export default [\n  'about',\n  'above',\n  'across',\n  'after',\n  'against',\n  'along',\n  'among',\n  'around',\n  'as',\n  'at',\n  'before',\n  'behind',\n  'below',\n  'beneath',\n  'beside',\n  'between',\n  'beyond',\n  'by',\n  'down',\n  'during',\n  'except',\n  'for',\n  'from',\n  'in',\n  'inside',\n  'into',\n  'like',\n  'near',\n  'of',\n  'off',\n  'on',\n  'out',\n  'outside',\n  'over',\n  'past',\n  'through',\n  'throughout',\n  'to',\n  'toward',\n  'under',\n  'underneath',\n  'unlike',\n  'until',\n  'up',\n  'upon',\n  'with',\n  'within',\n  'without'\n];\n","export default [\n  'Be prepared to appreciate what you meet.',\n  'May thy knife chip and shatter.',\n  'I will not fear. Fear is the mind-killer.',\n  \"If wishes were fishes we'd all cast nets.\",\n  'What do you despise? By this you are truly known.',\n  'To save one from a mistake is a gift of paradise.',\n  'Things persisted in not being what they seemed.',\n  'You cannot back into the future.',\n  'The real universe is always one step beyond logic.',\n  'Who are the rabble and who are the ruled?',\n  'The power to destroy a thing is the absolute control over it.',\n  'Anger is one thing, violence another.',\n  \"There's an animal kind of trick.\",\n  'When the fear has gone there will be nothing.',\n  'Fear is the little-death that brings total obliteration.',\n  'They tried and died.',\n  'That which submits rules.',\n  'Polish comes from the cities; wisdom from the desert.',\n  'A million deaths were not enough for Yueh.',\n  'Bless the Maker and all His Water.',\n  'He shall know your ways as if born to them.',\n  'That path leads ever down into stagnation.',\n  'Let the rabble have the rest.',\n  'I am the Kwisatz Haderach. That is reason enough.',\n  'But never once had he seen his moment of death.',\n  'Expect only what happens in the fight.',\n  'Life - all life - is in the service of life.',\n  'Thus spoke St. Alia-of-the-Knife.',\n  'You see him there - a man snared by Destiny.',\n  'He had already learned silence.',\n  'God created Arrakis to train the faithful.',\n  'His eyes assumed the blue of the Ibad.',\n  'The angry man rages denial.',\n  'They say she has pretensions of a literary nature.'\n];\n","export default [\n  'accepts',\n  'achieves',\n  'acquires',\n  'acts',\n  'admires',\n  'analyzes',\n  'answers',\n  'arouses',\n  'attacks',\n  'attempts to see',\n  'avoids',\n  'befalls',\n  'believes',\n  'betrays',\n  'blames',\n  'builds',\n  'cannot die',\n  'captures',\n  'changes',\n  'chooses',\n  'claims',\n  'clouds',\n  'collapses',\n  'commands',\n  'contends',\n  'controls',\n  'creates',\n  'cuts',\n  'dances',\n  'deceives',\n  'declares',\n  'deduces',\n  'delays',\n  'desires',\n  'despises',\n  'destroys',\n  'dies',\n  'disciplines',\n  'disobeys',\n  'disturbs',\n  'eases',\n  'emerges',\n  'encloses',\n  'ends',\n  'enslaves',\n  'evades',\n  'exists',\n  'experiences',\n  'faces',\n  'falls',\n  'fears',\n  'flounders',\n  'flows',\n  'forces',\n  'forgets',\n  'fulfills',\n  'grasps',\n  'guides',\n  'gushes',\n  'hallucinates',\n  'has',\n  'hears',\n  'influences',\n  'is',\n  'itches',\n  'knows',\n  'lacks',\n  'learns',\n  'limits',\n  'makes',\n  'manipulates',\n  'mates',\n  'meets',\n  'misjudges',\n  'moves',\n  'needs',\n  'obeys',\n  'orders',\n  'passes',\n  'pays',\n  'permits',\n  'prepares',\n  'produces',\n  'promises',\n  'prophecizes',\n  'prospers',\n  'rages',\n  'reaches',\n  'recites',\n  'remains',\n  'removes',\n  'repels',\n  'respects',\n  'rides',\n  'rushes',\n  'sacrifices',\n  'saves',\n  'says',\n  'secretly wishes',\n  'seeks',\n  'sees',\n  'sets',\n  'shows',\n  'sings',\n  'sinks',\n  'sleeps',\n  'slips',\n  'sow',\n  'steals',\n  'stops',\n  'streaks',\n  'strikes',\n  'strums',\n  'studies',\n  'submits',\n  'suffers',\n  'surrenders',\n  'takes',\n  'tends',\n  'terrifies',\n  'threatens',\n  'topples',\n  'trails',\n  'trains',\n  'travels',\n  'understands',\n  'uses',\n  'warns',\n  'waylays',\n  'will sing',\n  'witnesses',\n  'wrestles'\n];\n","import { MathUtils } from 'three';\n\nexport function randomElement(array: any[]) {\n  return array[MathUtils.randInt(0, array.length - 1)];\n}\n\nexport function capitalize(string: string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n","export const structures = [\n  'NVCN',\n  'NVRAN',\n  'NVRANCNVAN',\n  'RNVPN',\n  'RNVRAN,CNCN',\n  'PRANVRANCRANCVN',\n  'CRNVNPRN',\n  'RNPNVRN,PRNVN',\n  'PNCN,PNCRN',\n  'RNVCNV',\n  'RNV,RNV',\n  'NVPRANPRNVA',\n  'RNVPN,PNCNVA',\n  'NVRN,CNVRNV',\n  'NVAPN',\n  'PNNVPN,CV',\n  'RNV,RNVRAN',\n  'NVRAN,NVAN',\n  'CNVRN,PNNV',\n  'NVRNVRAN',\n  'NPN,NPAN,NPANV',\n  'ANVPNCNV',\n  'ANVPN',\n  'CNCNPRAN',\n];\n","import { WordType, getRandomWord } from './words';\nimport { structures } from './structures';\nimport { randomElement, capitalize } from './utils';\n\nexport default class Sentence {\n  private value: string;\n\n  constructor() {\n    const randomStructure = randomElement(structures);\n    this.value = this.build(randomStructure);\n  }\n\n  private build(structure: string) {\n    const words = (Array.from(structure) as WordType[]).map((wordType) =>\n      getRandomWord(wordType)\n    );\n\n    const sentence = words.join(' ').replace(/\\s,\\s/g, ',');\n    return capitalize(sentence) + '.';\n  }\n\n  toString() {\n    return this.value;\n  }\n}\n","import { MathUtils } from 'three';\nimport Sentence from './sentence';\n\ntype Constructor = {\n  min: number;\n  max: number;\n};\nexport default class Paragraph {\n  private min: number;\n  private max: number;\n  private value = '';\n\n  constructor({ min, max }: Constructor) {\n    this.min = min;\n    this.max = max;\n  }\n\n  build() {\n    const sentenceCount = MathUtils.randInt(this.min, this.max);\n\n    const sentences: string[] = [];\n\n    for (let i = 0; i < sentenceCount; i++) {\n      sentences.push(new Sentence().toString());\n    }\n\n    this.value = sentences.join(' ');\n    return this;\n  }\n\n  toString() {\n    return this.value;\n  }\n}\n","import React from 'react';\nimport Paragraph from './paragraph';\n\ntype Props = {\n  paragraphs: number;\n  minSentences: number;\n  maxSentences: number;\n  onChange: (text: string) => void;\n  children: (onClick: () => void) => React.ReactElement;\n};\n\nexport const Generator: React.FC<Props> = ({\n  paragraphs,\n  minSentences,\n  maxSentences,\n  onChange,\n  children,\n}) => {\n  const initialRenderRef = React.useRef(true);\n\n  const prevParagraphsRef = React.useRef(paragraphs);\n\n  const paragraphBuilder = React.useMemo(\n    () => new Paragraph({ min: minSentences, max: maxSentences }),\n    [minSentences, maxSentences]\n  );\n\n  const generate = React.useCallback((count) => {\n    return [...new Array(count)]\n      .map(() => paragraphBuilder.build().toString())\n      .join('\\n\\n');\n  }, []);\n\n  React.useEffect(() => {\n    if (initialRenderRef.current) {\n      initialRenderRef.current = false;\n      return;\n    }\n\n    if (prevParagraphsRef.current === paragraphs) {\n      return;\n    }\n\n    onChange(generate(paragraphs));\n    prevParagraphsRef.current = paragraphs;\n  }, [paragraphs, onChange, generate]);\n\n  const handleClick = () => {\n    onChange(generate(paragraphs));\n  };\n\n  return children(handleClick);\n};\n","/**\n * This is an ES6 class version of https://github.com/namniak/canvas-text-wrapper\n * Fixes an issue where the canvas element gets initialized repeatedly\n */\n\ntype Options = {\n  font: string;\n  sizeToFill?: boolean;\n  maxFontSizeToFill: number | undefined;\n  lineHeight?: number;\n  allowNewLine?: boolean;\n  lineBreak?: string;\n  textAlign?: CanvasTextAlign;\n  verticalAlign?: string;\n  paddingX?: number;\n  paddingY?: number;\n};\n\nconst defaultOptions: Required<Options> = {\n  font: '18px \"Times New Roman\", serif',\n  sizeToFill: false,\n  maxFontSizeToFill: undefined,\n  lineHeight: 1,\n  allowNewLine: true,\n  lineBreak: 'auto',\n  textAlign: 'left',\n  verticalAlign: 'top',\n  paddingX: 0,\n  paddingY: 0,\n};\n\nexport class Writer {\n  ctx: CanvasRenderingContext2D;\n\n  private canvas: HTMLCanvasElement;\n  private options: Required<Options>;\n\n  constructor(canvas: HTMLCanvasElement, options: Options) {\n    this.canvas = canvas;\n    this.ctx = canvas.getContext('2d')!;\n    this.options = { ...defaultOptions, ...options };\n\n    let scale = 1;\n\n    this.ctx.scale(scale, scale);\n    this.ctx.font = this.options.font;\n    this.ctx.textBaseline = 'bottom';\n    this.ctx.fillStyle = 'white';\n    this.ctx.save();\n  }\n\n  write(text: string) {\n    this.ctx.restore();\n\n    const EL_WIDTH = this.canvas.width;\n    const EL_HEIGHT = this.canvas.height;\n\n    const MAX_TEXT_WIDTH = EL_WIDTH - this.options.paddingX * 2;\n    const MAX_TEXT_HEIGHT = EL_HEIGHT - this.options.paddingY * 2;\n\n    const multiNewLineDelimiter = '\\u200B';\n    const fontSize = this.options.font.match(/\\d+(px|em|%)/g)\n      ? +(this.options.font.match(/\\d+(px|em|%)/g) as any)[0].match(/\\d+/g)\n      : 18;\n    const newLineIndexes: number[] = [];\n    const textPos = { x: 0, y: 0 };\n\n    let lines: string[] = [];\n    let textBlockHeight = 0;\n    let lineHeight = 0;\n    let fontParts: string[];\n\n    const handleMultipleNewline = (text: string) => {\n      do {\n        text = text.replace(/\\n\\n/g, '\\n' + multiNewLineDelimiter + '\\n');\n      } while (text.indexOf('\\n\\n') > -1);\n      return text;\n    };\n\n    const setFont = (fontSize: number) => {\n      if (!fontParts) {\n        fontParts = this.options.sizeToFill\n          ? this.ctx.font.split(/\\b\\d+px\\b/i)\n          : this.options.font.split(/\\b\\d+px\\b/i);\n      }\n\n      this.ctx.font = fontParts[0] + fontSize + 'px' + fontParts[1];\n    };\n\n    const setLineHeight = () => {\n      if (!isNaN(this.options.lineHeight)) {\n        lineHeight = fontSize * this.options.lineHeight;\n      } else if (this.options.lineHeight.toString().indexOf('px') !== -1) {\n        lineHeight = parseInt(`${this.options.lineHeight}`);\n      } else if (this.options.lineHeight.toString().indexOf('%') !== -1) {\n        lineHeight = (parseInt(`${this.options.lineHeight}`) / 100) * fontSize;\n      }\n    };\n\n    const setHorizAlign = () => {\n      this.ctx.textAlign = this.options.textAlign;\n\n      if (this.options.textAlign === 'center') {\n        textPos.x = EL_WIDTH / 2;\n      } else if (this.options.textAlign === 'right') {\n        textPos.x = EL_WIDTH - this.options.paddingX;\n      } else {\n        textPos.x = this.options.paddingX;\n      }\n    };\n\n    const setVertAlign = () => {\n      if (this.options.verticalAlign === 'middle') {\n        textPos.y = (EL_HEIGHT - textBlockHeight) / 2;\n      } else if (this.options.verticalAlign === 'bottom') {\n        textPos.y = EL_HEIGHT - textBlockHeight - this.options.paddingY;\n      } else {\n        textPos.y = this.options.paddingY;\n      }\n    };\n\n    const drawText = () => {\n      const skipLineOnMatch = multiNewLineDelimiter + ' ';\n\n      for (var i = 0; i < lines.length; i++) {\n        textPos.y = parseInt(`${textPos.y}`) + lineHeight;\n\n        if (lines[i] !== skipLineOnMatch) {\n          this.ctx.fillText(lines[i], textPos.x, textPos.y);\n        }\n      }\n    };\n\n    const checkLength = (words: string[]) => {\n      var testString, tokenLen, sliced, leftover;\n\n      words.forEach((word, index) => {\n        testString = '';\n        tokenLen = this.ctx.measureText(word).width;\n\n        if (tokenLen > MAX_TEXT_WIDTH) {\n          for (\n            var k = 0;\n            this.ctx.measureText(testString + word[k]).width <=\n              MAX_TEXT_WIDTH && k < word.length;\n            k++\n          ) {\n            testString += word[k];\n          }\n\n          sliced = word.slice(0, k);\n          leftover = word.slice(k);\n          words.splice(index, 1, sliced, leftover);\n        }\n      });\n    };\n\n    const breakText = (words: string[]) => {\n      lines = [];\n      for (var i = 0, j = 0; i < words.length; j++) {\n        lines[j] = '';\n\n        if (this.options.lineBreak === 'auto') {\n          if (\n            this.ctx.measureText(lines[j] + words[i]).width > MAX_TEXT_WIDTH\n          ) {\n            break;\n          } else {\n            while (\n              this.ctx.measureText(lines[j] + words[i]).width <=\n                MAX_TEXT_WIDTH &&\n              i < words.length\n            ) {\n              lines[j] += words[i] + ' ';\n              i++;\n\n              if (this.options.allowNewLine) {\n                for (var k = 0; k < newLineIndexes.length; k++) {\n                  if (newLineIndexes[k] === i) {\n                    j++;\n                    lines[j] = '';\n                    break;\n                  }\n                }\n              }\n            }\n          }\n          lines[j] = lines[j].trim();\n        } else {\n          lines[j] = words[i];\n          i++;\n        }\n      }\n    };\n\n    const wrap = () => {\n      if (this.options.allowNewLine) {\n        var newLines = text.trim().split('\\n');\n        for (var i = 0, idx = 0; i < newLines.length - 1; i++) {\n          idx += newLines[i].trim().split(/\\s+/).length;\n          newLineIndexes.push(idx);\n        }\n      }\n\n      var words = text.trim().split(/\\s+/);\n      checkLength(words);\n      breakText(words);\n\n      textBlockHeight = lines.length * lineHeight;\n    };\n\n    const adjustFontSize = (size: number) => {\n      setFont(size);\n      lineHeight = size;\n      wrap();\n    };\n\n    const render = () => {\n      if (this.options.sizeToFill) {\n        let wordsCount = text.trim().split(/\\s+/).length;\n        let newFontSize = 0;\n\n        do {\n          if (!!this.options.maxFontSizeToFill) {\n            if (++newFontSize <= this.options.maxFontSizeToFill) {\n              adjustFontSize(newFontSize);\n            } else {\n              break;\n            }\n          } else {\n            adjustFontSize(++newFontSize);\n          }\n        } while (\n          textBlockHeight < MAX_TEXT_HEIGHT &&\n          lines.join(' ').split(/\\s+/).length === wordsCount\n        );\n\n        adjustFontSize(--newFontSize);\n      } else {\n        wrap();\n      }\n\n      setVertAlign();\n      setHorizAlign();\n      drawText();\n    };\n\n    text = handleMultipleNewline(text);\n    setFont(fontSize);\n    setLineHeight();\n    render();\n\n    return lines;\n  }\n}\n","export function getParticleGap(text: string): number {\n  const gap = clampNumberRange(text.length, {\n    input: [50, 500],\n    output: [12, 4],\n  });\n\n  return gap;\n}\n\ntype Clamp = [number, number];\n\ntype ClampRanges = {\n  input: Clamp;\n  output: Clamp;\n};\n\nfunction clampNumberRange(value: number, { input, output }: ClampRanges) {\n  const mappedValue =\n    ((value - input[0]) * (output[1] - output[0])) / (input[1] - input[0]) +\n    output[0];\n\n  return clamp(mappedValue, [output[0], output[1]]);\n}\n\nfunction clamp(value: number, [min, max]: Clamp): number {\n  if (min > max) {\n    let temp = min;\n    min = max;\n    max = temp;\n  }\n\n  return Math.min(Math.max(value, min), max);\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Writer } from './writer';\nimport { getParticleGap } from './utils';\n\ntype Props = {\n  text: string;\n  onChange: (imageData: ImageData, particleGap: number) => void;\n};\n\nexport const ImageData: React.FC<Props> = ({ text, onChange }) => {\n  const wrapperRef = React.useRef<HTMLDivElement | null>(null);\n  const canvasRef = React.useRef<HTMLCanvasElement | null>(null);\n\n  const [writer, setWriter] = React.useState<Writer | null>(null);\n\n  React.useEffect(() => {\n    if (wrapperRef.current && canvasRef.current) {\n      canvasRef.current.width = wrapperRef.current.clientWidth;\n      canvasRef.current.height = wrapperRef.current.clientHeight;\n    }\n  }, []);\n\n  React.useEffect(() => {\n    if (canvasRef.current) {\n      setWriter(\n        new Writer(canvasRef.current, {\n          font: '16px \"Tiempos Text\", \"Times New Roman\", serif',\n          maxFontSizeToFill: 77,\n          textAlign: 'center',\n          verticalAlign: 'middle',\n          sizeToFill: true,\n        })\n      );\n    }\n  }, []);\n\n  React.useEffect(() => {\n    if (canvasRef.current && writer) {\n      const { width, height } = canvasRef.current;\n\n      writer.write(text);\n\n      onChange(\n        writer.ctx.getImageData(0, 0, width, height),\n        getParticleGap(text)\n      );\n\n      writer.ctx.clearRect(0, 0, width, height);\n    }\n    // eslint-disable-next-line\n  }, [onChange, text, writer]);\n\n  return (\n    <CanvasWrapper ref={wrapperRef}>\n      <canvas ref={canvasRef} />\n    </CanvasWrapper>\n  );\n};\n\nconst CanvasWrapper = styled.div`\n  width: 100%;\n  flex-grow: 1;\n  visibility: hidden;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { NumberOfParagraphs } from 'types';\n\ntype Props = {\n  count: NumberOfParagraphs;\n  onChange: (count: NumberOfParagraphs) => void;\n} & Omit<React.ComponentProps<'div'>, 'onChange'>;\n\nconst Component: React.FC<Props> = ({ className, count, onChange }) => {\n  const [isOpen, setIsOpen] = React.useState(false);\n\n  const toggleOpen = () => setIsOpen((prevIsOpen) => !prevIsOpen);\n\n  return (\n    <div className={className} onClick={toggleOpen}>\n      <Wrapper>\n        {count}\n        <Dropdown isOpen={isOpen}>\n          {([1, 2, 3, 4] as Array<NumberOfParagraphs>).map((num) => (\n            <Option key={num} onClick={() => onChange(num)}>\n              {num}\n            </Option>\n          ))}\n        </Dropdown>\n      </Wrapper>\n    </div>\n  );\n};\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: rgba(255, 255, 255, 0.8);\n  border: 1px solid rgba(255, 255, 255, 0.8);\n  position: relative;\n  top: 8px;\n  padding: 8px 16px;\n  font-size: 12px;\n  line-height: 14px;\n  text-transform: uppercase;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: all 300ms;\n\n  :hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\nconst Dropdown = styled.ul<{ isOpen: boolean }>`\n  visibility: ${({ isOpen }) => (isOpen ? 'visible' : 'hidden')};\n  position: absolute;\n  top: 38px;\n  border: 1px solid rgba(255, 255, 255, 0.8);\n  border-radius: 4px;\n  display: flex;\n  flex-direction: column;\n  transition: all 300ms;\n`;\n\nconst Option = styled.li`\n  padding: 8px 16px;\n  font-size: 12px;\n  line-height: 20px;\n  text-transform: uppercase;\n\n  :hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n`;\n\nexport const ParagraphCount = styled(Component)`\n  padding-bottom: 16px;\n  margin-right: 8px;\n`;\n","import styled from 'styled-components';\n\nexport const OtherMemory = styled.button`\n  color: rgba(255, 255, 255, 0.8);\n  border: 1px solid rgba(255, 255, 255, 0.8);\n  max-width: 175px;\n  padding: 8px 12px;\n  font-size: 12px;\n  line-height: 14px;\n  letter-spacing: 0.2rem;\n  text-transform: uppercase;\n  background: transparent;\n  outline: 0;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: all 300ms;\n\n  :hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  :active {\n    background: rgba(255, 255, 255, 0.2);\n  }\n\n  :disabled {\n    border: 1px solid rgba(255, 255, 255, 0.3);\n    color: rgba(255, 255, 255, 0.3);\n    background: transparent;\n  }\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { ParagraphCount } from './ParagraphCount';\nimport { OtherMemory } from './OtherMemory';\nimport { NumberOfParagraphs } from 'types';\n\ntype Props = {\n  count: NumberOfParagraphs;\n  onChangeCount: (count: NumberOfParagraphs) => void;\n  onGenerate: () => void;\n  disabled?: boolean;\n};\n\nexport const Interface: React.FC<Props> = ({\n  count,\n  onChangeCount,\n  onGenerate,\n  disabled,\n}) => (\n  <Wrapper>\n    <ParagraphCount count={count} onChange={onChangeCount} />\n    <OtherMemory onClick={onGenerate} disabled={disabled}>\n      Other Memory\n    </OtherMemory>\n  </Wrapper>\n);\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 32px;\n  height: 100px;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { MathUtils } from 'three';\nimport { Dune } from 'components/dune';\nimport { Generator } from 'components/generator';\nimport { ImageData } from 'components/image-data';\nimport { Interface } from 'components/interface';\nimport { getRandomQuote } from 'components/generator/words';\nimport { NumberOfParagraphs } from 'types';\n\nexport const App: React.FC = () => {\n  const [count, setCount] = React.useState<NumberOfParagraphs>(1);\n\n  const [text, setText] = React.useState(getRandomQuote());\n\n  const [position, setPosition] = React.useState<Float32Array | null>(null);\n\n  const [isRendering, setIsRendering] = React.useState(true);\n\n  const handleImageData = React.useCallback(\n    (imageData: ImageData, particleGap: number) => {\n      // canvas image data is a one-dimensional array of RGBA values per pixel\n      const pointCoords: number[] = [];\n\n      let i = 0;\n\n      while (i < imageData.data.length) {\n        const alpha = imageData.data[i + 3];\n\n        if (alpha > 0) {\n          const x = ((i / 4) % imageData.width) - imageData.width / 2;\n          const y = -((i / 4 - x) / imageData.width - imageData.height / 2);\n\n          pointCoords.push(x, y - 45, 0);\n        }\n\n        i += MathUtils.randInt(1, particleGap) * 4;\n      }\n\n      setPosition(Float32Array.from(pointCoords));\n    },\n    []\n  );\n\n  const handleComplete = React.useCallback(() => setIsRendering(false), []);\n\n  const handleChange = (newText: string) => {\n    if (isRendering) {\n      return;\n    }\n\n    setIsRendering(true);\n    setText(newText);\n  };\n\n  return (\n    <StyledBackground>\n      {position && (\n        <Dune\n          position={position}\n          isRendering={isRendering}\n          onComplete={handleComplete}\n        />\n      )}\n      <Generator\n        paragraphs={count}\n        minSentences={1}\n        maxSentences={2}\n        onChange={handleChange}\n      >\n        {(onGenerate) => (\n          <InterfaceWrapper>\n            <Interface\n              count={count}\n              onChangeCount={setCount}\n              onGenerate={onGenerate}\n              disabled={isRendering}\n            />\n            <ImageData text={text} onChange={handleImageData} />\n          </InterfaceWrapper>\n        )}\n      </Generator>\n    </StyledBackground>\n  );\n};\n\nconst StyledBackground = styled.main`\n  -webkit-background-size: cover;\n  -moz-background-size: cover;\n  -o-background-size: cover;\n  background-size: cover;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n`;\n\nconst InterfaceWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  padding: 24px 48px;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n`;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './components/app';\nimport * as serviceWorker from './serviceWorker';\nimport './reset.css';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}